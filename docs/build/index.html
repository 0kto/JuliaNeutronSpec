<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Documentation · JuliaNeutronSpec</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>JuliaNeutronSpec</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Documentation</a><ul class="internal"><li><a class="tocitem" href="#Environment"><span>Environment</span></a></li><li><a class="tocitem" href="#Features"><span>Features</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Documentation"><a class="docs-heading-anchor" href="#Documentation">Documentation</a><a id="Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Documentation" title="Permalink"></a></h1><ul><li><a href="#Documentation">Documentation</a></li><li class="no-marker"><ul><li><a href="#Environment">Environment</a></li><li><a href="#Features">Features</a></li><li class="no-marker"><ul><li><a href="#I/O">I/O</a></li><li><a href="#DataHandling">DataHandling</a></li><li><a href="#Analysis">Analysis</a></li><li><a href="#Extended-Packages">Extended Packages</a></li><li><a href="#Scattering-Functions">Scattering Functions</a></li><li><a href="#Other">Other</a></li></ul></li></ul></li></ul><p>The package handles data parsing and analysis for inelastic neutron scattering experiments. It aims to be a flexible and reliable package for all needs for data ingestion and fast plotting, and holds routines for data analysis.</p><h2 id="Environment"><a class="docs-heading-anchor" href="#Environment">Environment</a><a id="Environment-1"></a><a class="docs-heading-anchor-permalink" href="#Environment" title="Permalink"></a></h2><p>The package relies on many other Julia packages, and makes using them a bit easier by providing wrappers for specific functions.</p><p>Some of the most important Packages are:</p><ul><li>DataFrames.jl and CSV.jl</li></ul><h2 id="Features"><a class="docs-heading-anchor" href="#Features">Features</a><a id="Features-1"></a><a class="docs-heading-anchor-permalink" href="#Features" title="Permalink"></a></h2><h3 id="I/O"><a class="docs-heading-anchor" href="#I/O">I/O</a><a id="I/O-1"></a><a class="docs-heading-anchor-permalink" href="#I/O" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.io_ill_header" href="#JuliaNeutronSpec.io_ill_header"><code>JuliaNeutronSpec.io_ill_header</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_ill_header(filename::AbstractString)</code></pre><p>Reads the ILL header and returns the three dictionaries</p><ul><li><code>param</code> with all the instrument configs</li><li><code>varia</code> with all the motors</li><li><code>motor0</code> with all the zero values for the motors</li><li><code>df_meta</code> with the line numbers important for reading the actual counts</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/io/io_ill_header.jl#L2-L10">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.io_ill" href="#JuliaNeutronSpec.io_ill"><code>JuliaNeutronSpec.io_ill</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">io_ill(filename::AbstractString,
       precision_dict::AbstractDict{Symbol,Int};
       kwargs...)</code></pre><p>Read a single experimental measurement scan from file. Handles the ILL format for inelastic neutron spectrometers (tested with IN20, IN8) in single detector and multidetector (flatcone) configuration. The output DataFrame has columns determined in <a href="#JuliaNeutronSpec.columnsTAS"><code>columnsTAS</code></a>.   Motor angles can be overwritten by supplying a dictionary to the kwarg <code>override</code>.</p><p><strong>Arguments</strong></p><ul><li><code>filename::AbstractString</code>: relative file path</li><li><code>precision_dict::AbstractDict{Symbol,Int}</code>: rounding to precision for defined column (<code>precision_dict=Dict(:EN=&gt;2)</code>).</li><li><code>kwargs...</code>:<ul><li><code>rename_cols::Dict()</code>: <code>Dict(:old_name =&gt; :new_name)</code></li><li><code>ki::Number</code>: only supply in ki=fixed measurements (time-of-flight)</li><li><code>kf::Number</code>: manually supply kf</li><li><code>override::Dict()</code>: <code>Dict(:A1 = 15.0)</code></li><li><code>detector_efficiency::Array{Union{Float,Measurments}}</code></li><li><code>par_lat::Array{Float,1}</code>: <code>[a b c α β γ]</code></li></ul></li></ul><p>See also: <a href="#JuliaNeutronSpec.columnsTAS"><code>columnsTAS</code></a>, <a href="#JuliaNeutronSpec.calc_detector_efficiency-Tuple{AbstractDataFrame}"><code>calc_detector_efficiency</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/io/io_ill.jl#L1-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.calc_detector_efficiency-Tuple{AbstractDataFrame}" href="#JuliaNeutronSpec.calc_detector_efficiency-Tuple{AbstractDataFrame}"><code>JuliaNeutronSpec.calc_detector_efficiency</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">calc_detector_efficiency(df)</code></pre><p>calculate the detector efficiency for each detector distinguised by <code>:detID</code> using a single measurement. The output can be handed over to <code>io_ill( ...; detector_efficiency=output</code>), or the correction can be manually applied by dividing the Monitor count by the output.</p><p><strong>Arguments</strong></p><ul><li><code>df::AbstractDataFrame</code>: cols <code>:CNTS</code> and <code>:detID</code> are mandatory.</li></ul><p>See also <a href="#JuliaNeutronSpec.io_ill"><code>io_ill</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/io/efficiency.jl#L2-L15">source</a></section></article><h3 id="DataHandling"><a class="docs-heading-anchor" href="#DataHandling">DataHandling</a><a id="DataHandling-1"></a><a class="docs-heading-anchor-permalink" href="#DataHandling" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.combine" href="#JuliaNeutronSpec.combine"><code>JuliaNeutronSpec.combine</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">combine(
    df_in::AbstractDataFrame,
    edges;
    bin_cols::Array{Symbol,1}=[:EN],
    monitor_count::Number=1e4
)</code></pre><p>Combine multiple measurements to a single measurement. This function should only be applied to raw data!</p><p>All data in a DataFrame is binned according to <code>edges</code> along the columns defined in <code>bin_cols</code> and normalized to <code>monitor_count</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/data-handling/combine.jl#L50-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.normalize" href="#JuliaNeutronSpec.normalize"><code>JuliaNeutronSpec.normalize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">normalize!(
    df::AbstractDataFrame;
    monitor_col::Symbol=:MON,
    monitor_count::Float64=1e4,
    data_cols::Array{Symbol,1}=[:CNTS]
)</code></pre><p>return a normalized DataFrame by scaling the column <code>monitor_col</code> to <code>monitor_count</code>, and applying the same scaling factor to the all <code>data_cols</code> as well.</p><p>See also: <a href="#JuliaNeutronSpec.normalize"><code>normalize</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/data-handling/combine.jl#L30-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.normalize!" href="#JuliaNeutronSpec.normalize!"><code>JuliaNeutronSpec.normalize!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">normalize!(
    df::AbstractDataFrame;
    monitor_col::Symbol=:MON,
    monitor_count::Float64=1e4,
    data_cols::Array{Symbol,1}=[:CNTS]
)</code></pre><p>normalize a DataFrame <em>in place</em> by scaling the column <code>monitor_col</code> to <code>monitor_count</code>, and applying the same scaling factor to the all <code>data_cols</code> as well.</p><p>See also: <a href="#JuliaNeutronSpec.normalize"><code>normalize</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/data-handling/combine.jl#L1-L14">source</a></section></article><h3 id="Analysis"><a class="docs-heading-anchor" href="#Analysis">Analysis</a><a id="Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Analysis" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.OrientationFactor" href="#JuliaNeutronSpec.OrientationFactor"><code>JuliaNeutronSpec.OrientationFactor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orientationfactor_sq(x,y,z)</code></pre><p>calcualte orientation factor for a,b,c direction from q<em>x q</em>y q_z in units of Å^-1</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/analysis/OrientationFactor.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.PolarizationAnalysis" href="#JuliaNeutronSpec.PolarizationAnalysis"><code>JuliaNeutronSpec.PolarizationAnalysis</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">PolarizationAnalysis(df, MMON = 1e4, precision_dict)</code></pre><p>converts NeutronDataFrames to polarizedNeutronDataFrames. sorts into SF / NSF, and x,y,z channels, and calculates polarization of excitations (relative to Q)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/analysis/PolarizationAnalysis.jl#L1-L7">source</a></section></article><h3 id="Extended-Packages"><a class="docs-heading-anchor" href="#Extended-Packages">Extended Packages</a><a id="Extended-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#Extended-Packages" title="Permalink"></a></h3><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>fit</code>. Check Documenter&#39;s build log for details.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>Spline1D</code>. Check Documenter&#39;s build log for details.</p></div></div><h3 id="Scattering-Functions"><a class="docs-heading-anchor" href="#Scattering-Functions">Scattering Functions</a><a id="Scattering-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Scattering-Functions" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.Kf" href="#JuliaNeutronSpec.Kf"><code>JuliaNeutronSpec.Kf</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Kf(kf, ϕ; ψ = 0)</code></pre><p>calculate Kf from kf (Å^-1), ϕ (°), and ψ. ϕ is the horizontal detector angle. ψ is the vertical detector angle. TODO: implement out-of-plane scattering depending on ψ.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/scattering_routines/tas_functions.jl#L7-L14">source</a></section></article><h3 id="Other"><a class="docs-heading-anchor" href="#Other">Other</a><a id="Other-1"></a><a class="docs-heading-anchor-permalink" href="#Other" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="JuliaNeutronSpec.columnsTAS" href="#JuliaNeutronSpec.columnsTAS"><code>JuliaNeutronSpec.columnsTAS</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">columnsTAS</code></pre><p>OrderedDict that lists columns and corresponding etypes for DataFrames holding TAS Neutron Data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/0kto/JuliaNeutronSpec.jl/blob/4bae93e103a9dd5b7354262fbc78e4178f93e01d/src/types/columns.jl#L3-L8">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Thursday 13 January 2022 19:04">Thursday 13 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
